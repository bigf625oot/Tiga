# 数据库连接配置
database:
  type: "postgresql" # 支持 mysql, postgresql, sqlite
  host: "localhost"
  port: 5432
  user: "postgres"
  password: "password"
  database: "recorder_db"
  # 可选：SQLAlchemy 连接字符串 (覆盖上述配置)
  # connection_string: "postgresql+psycopg2://user:pass@host:port/dbname"

# 处理配置
processing:
  chunk_size: 10000        # 每批处理的记录数
  max_workers: 4           # 并行进程数
  checkpoint_file: "export_checkpoint.json" # 用于断点续传的检查点文件
  memory_limit_mb: 8192    # 内存软限制（用于警告/清理）

# 图构建配置
graph:
  # 作为实体入图的表
  entities:
    - table: "employees"   # 表名
      id_column: "id"      # ID 列名
      label: "Employee"    # 节点标签
      # 包含作为节点属性的列（留空则包含所有非外键列）
      attributes: ["name", "email", "department"] 
      # 需要卸载的长文本字段（图中只存储 ID）
      long_text_fields: ["biography", "resume"]
    
    - table: "projects"
      id_column: "id"
      label: "Project"
      attributes: ["title", "status", "start_date"]
      long_text_fields: ["description"]

  # 关系 (边)
  relationships:
    - source_table: "employees" # 源表
      target_table: "projects"  # 目标表
      foreign_key: "project_id" # 源表中的外键列
      relation_type: "WORKS_ON" # 关系类型
      weight_column: "allocation_percent" # 可选：权重列

# 输出配置
output:
  output_dir: "./data/lightrag_store" # 直接指向 LightRAG 存储目录
  update_mode: "merge"     # 模式: merge (合并到现有图谱)
  lightrag_format: true    # 导出 LightRAG 兼容格式
  vector_mapping: true     # 生成向量数据库映射表
  file_sharding: true      # 拆分大型输出文件
  shard_size_mb: 100       # 每个文件的最大大小 (MB)
