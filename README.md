# Taichi Agent - æ™ºèƒ½ä½“ç¼–æ’ä¸æ•°æ®æ™ºèƒ½å¹³å°

Taichi Agent æ˜¯ä¸€ä¸ªé›†æˆäº†æ™ºèƒ½ä½“ç¼–æ’ã€å¤šæ¨¡æ€çŸ¥è¯†åº“ï¼ˆRAGï¼‰ã€æ•°æ®æ™ºèƒ½åˆ†æã€è‡ªåŠ¨åŒ–å·¥ä½œæµä¸å…¨ç½‘æœç´¢çš„ç°ä»£åŒ–å…¨æ ˆå¹³å°ã€‚æœ¬é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›å¼€ç®±å³ç”¨çš„ä¼ä¸šçº§ AI åº”ç”¨å¼€å‘æ¡†æ¶ï¼Œæ”¯æŒä»ç®€å•çš„å¯¹è¯æœºå™¨äººåˆ°å¤æ‚çš„è‡ªä¸»æ™ºèƒ½ä½“ä»»åŠ¡æ‰§è¡Œã€‚

---

## ğŸ“š ç›®å½•

- [ğŸ¨ å‰ç«¯å·¥ç¨‹ (Frontend)](#-å‰ç«¯å·¥ç¨‹-frontend)
  - [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
  - [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
  - [ç›®å½•ç»“æ„](#ç›®å½•ç»“æ„)
  - [æ ¸å¿ƒåŠŸèƒ½æ¨¡å—](#æ ¸å¿ƒåŠŸèƒ½æ¨¡å—)
  - [ç¯å¢ƒå‡†å¤‡ä¸å¯åŠ¨](#ç¯å¢ƒå‡†å¤‡ä¸å¯åŠ¨)
- [âš™ï¸ åç«¯æœåŠ¡ (Backend)](#%EF%B8%8F-åç«¯æœåŠ¡-backend)
  - [æŠ€æœ¯æ¶æ„](#æŠ€æœ¯æ¶æ„)
  - [æ ¸å¿ƒæœåŠ¡](#æ ¸å¿ƒæœåŠ¡)
  - [æ•°æ®åº“ä¸å­˜å‚¨](#æ•°æ®åº“ä¸å­˜å‚¨)
  - [ç¯å¢ƒé…ç½®ä¸å¯åŠ¨](#ç¯å¢ƒé…ç½®ä¸å¯åŠ¨)
  - [Task Mode (ä»»åŠ¡æ¨¡å¼)](#task-mode-ä»»åŠ¡æ¨¡å¼)
  - [API æ¥å£](#api-æ¥å£)

---

## ğŸ¨ å‰ç«¯å·¥ç¨‹ (Frontend)

### é¡¹ç›®ç®€ä»‹
å‰ç«¯é‡‡ç”¨ **Vue 3 + Vite + TypeScript** ç°ä»£åŒ–æŠ€æœ¯æ ˆæ„å»ºï¼Œé›†æˆäº† **Element Plus** å’Œ **Ant Design Vue** åŒç»„ä»¶åº“ï¼Œæä¾›æµç•…çš„äº¤äº’ä½“éªŒå’Œå¼ºå¤§çš„æ•°æ®å¯è§†åŒ–èƒ½åŠ›ï¼ˆåŸºäº **V-Network-Graph** å’Œ **3D-Force-Graph**ï¼‰ã€‚

### æŠ€æœ¯æ ˆ
| ç±»åˆ« | æŠ€æœ¯/åº“ | è¯´æ˜ |
| :--- | :--- | :--- |
| **æ¡†æ¶** | Vue 3.3+ | æ ¸å¿ƒ UI æ¡†æ¶ |
| **æ„å»ºå·¥å…·** | Vite 4.4+ | æé€Ÿå¼€å‘ä¸æ„å»ºå·¥å…· |
| **è¯­è¨€** | TypeScript 5.x | é™æ€ç±»å‹æ£€æŸ¥ |
| **UI ç»„ä»¶åº“** | Element Plus / Ant Design Vue | åŒ UI åº“æ”¯æŒï¼Œé€‚é…ä¸åŒä¸šåŠ¡åœºæ™¯ |
| **æ ·å¼** | Tailwind CSS 3.3 | åŸå­åŒ– CSS æ¡†æ¶ |
| **çŠ¶æ€ç®¡ç†** | Pinia 2.1 | å“åº”å¼çŠ¶æ€ç®¡ç† |
| **å¯è§†åŒ–** | V-Network-Graph / 3D-Force-Graph | çŸ¥è¯†å›¾è°±ä¸ç½‘ç»œå…³ç³»å¯è§†åŒ– |
| **å›¾è¡¨** | Chart.js / Vue-Chartjs | æ•°æ®æŠ¥è¡¨ä¸æŒ‡æ ‡å±•ç¤º |
| **å½•éŸ³** | Recorder-Lib | æµè§ˆå™¨ç«¯éŸ³é¢‘å½•åˆ¶ä¸å¤„ç† |

### ç›®å½•ç»“æ„
```bash
frontend/
â”œâ”€â”€ public/              # é™æ€èµ„æº (å›¾æ ‡, å½•éŸ³åº“ç­‰)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/            # æ ¸å¿ƒå±‚ (API å®¢æˆ·ç«¯, å…¨å±€é…ç½®)
â”‚   â”œâ”€â”€ features/        # ä¸šåŠ¡åŠŸèƒ½æ¨¡å— (æŒ‰é¢†åŸŸåˆ’åˆ†)
â”‚   â”‚   â”œâ”€â”€ agent/       # æ™ºèƒ½ä½“ç®¡ç† (æœåŠ¡å¸‚åœº, æŠ€èƒ½, è„šæœ¬)
â”‚   â”‚   â”œâ”€â”€ analytics/   # æ•°æ®åˆ†æ (æŒ‡æ ‡, SQL æŸ¥è¯¢)
â”‚   â”‚   â”œâ”€â”€ knowledge/   # çŸ¥è¯†åº“ä¸å›¾è°± (Graph Export)
â”‚   â”‚   â”œâ”€â”€ qa/          # æ™ºèƒ½é—®ç­” (Chat)
â”‚   â”‚   â”œâ”€â”€ recording/   # å½•éŸ³ä¸å¤šåª’ä½“ (ASR)
â”‚   â”‚   â”œâ”€â”€ search/      # å…¨ç½‘æœç´¢æ™ºèƒ½ä½“ (News, Web)
â”‚   â”‚   â”œâ”€â”€ system/      # ç³»ç»Ÿè®¾ç½® (DB, Model)
â”‚   â”‚   â””â”€â”€ workflow/    # å·¥ä½œæµç¼–æ’ (Task Panel, Artifacts)
â”‚   â”œâ”€â”€ shared/          # å…±äº«èµ„æº
â”‚   â”‚   â”œâ”€â”€ components/  # é€šç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ hooks/       # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ App.vue          # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.js          # å…¥å£æ–‡ä»¶
â””â”€â”€ vite.config.js       # Vite é…ç½®
```

### æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
- **Search Agent**: é›†æˆ DuckDuckGo çš„å…¨ç½‘æœç´¢ä¸æ–°é—»èšåˆï¼Œæ”¯æŒå®æ—¶ä¿¡æ¯æ£€ç´¢ã€‚
- **Agent Management**: æ™ºèƒ½ä½“åˆ›å»ºã€æŠ€èƒ½é…ç½® (Skills)ã€ç”¨æˆ·è„šæœ¬ (User Scripts) ä¸æœåŠ¡å¸‚åœºã€‚
- **Knowledge Base**: åŸºäº LightRAG çš„çŸ¥è¯†åº“ç®¡ç†ï¼Œæ”¯æŒ 2D/3D å›¾è°±å¯¼å‡ºä¸å¯è§†åŒ–ã€‚
- **Analytics**: åŸºäº Vanna çš„ Text-to-SQL æ•°æ®æŸ¥è¯¢ä¸å…³é”®æŒ‡æ ‡ (Indicators) ç›‘æ§ã€‚
- **Smart QA**: åŸºäº RAG çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼Œæ”¯æŒå¤šæ¨¡æ€äº¤äº’ã€‚
- **Workflow**: å¯è§†åŒ–å·¥ä½œæµç¼–æ’ï¼Œæ”¯æŒä»»åŠ¡é¢æ¿ã€æ—¥å¿—å®¡è®¡ä¸äº§ç‰©ç¼–è¾‘ã€‚
- **Media & ASR**: æµè§ˆå™¨ç«¯å½•éŸ³ä¸è‡ªåŠ¨è¯­éŸ³è½¬æ–‡å­—åŠŸèƒ½ã€‚

### ç¯å¢ƒå‡†å¤‡ä¸å¯åŠ¨
1.  **å®‰è£…ä¾èµ–**:
    ```bash
    cd frontend
    pnpm install  # æˆ– npm install
    ```
2.  **å¯åŠ¨å¼€å‘æœåŠ¡**:
    ```bash
    npm run dev
    ```
    æœåŠ¡é»˜è®¤è¿è¡Œåœ¨ `http://localhost:5173`ã€‚

---

## âš™ï¸ åç«¯æœåŠ¡ (Backend)

### æŠ€æœ¯æ¶æ„
åç«¯åŸºäº **Python 3.10+** å’Œ **FastAPI** æ¡†æ¶æ„å»ºï¼Œéµå¾ª RESTful è§„èŒƒã€‚é‡‡ç”¨äº† **Agno** ä½œä¸ºæ™ºèƒ½ä½“æ ¸å¿ƒæ¡†æ¶ï¼Œé›†æˆ **LightRAG** è¿›è¡ŒçŸ¥è¯†æ£€ç´¢ï¼Œå¹¶æ”¯æŒ **MCP (Model Context Protocol)** æ‰©å±•å·¥å…·èƒ½åŠ›ã€‚

### æŠ€æœ¯æ ˆä¸æ¡†æ¶ç‰ˆæœ¬
- **Web æ¡†æ¶**: FastAPI (>=0.111.0)
- **æ™ºèƒ½ä½“æ¡†æ¶**: Agno (Phidata fork/successor)
- **æ•°æ®åº“ ORM**: SQLAlchemy (2.0+) + Alembic
- **AI/LLM**: OpenAI SDK, Vanna (Text-to-SQL)
- **RAG å¼•æ“**: LightRAG, LanceDB (å‘é‡åº“), Neo4j (å›¾æ•°æ®åº“æ”¯æŒ)
- **å·¥å…·åè®®**: MCP (Model Context Protocol)
- **æœç´¢æœåŠ¡**: DuckDuckGo Search (ddgs)
- **å­˜å‚¨**: Local, AWS S3, Aliyun OSS
- **å·¥å…·åº“**: Pandas, NumPy, Pydantic, NetworkX

### æ ¸å¿ƒæœåŠ¡ (`app/services`)
- **Agent Service**: æ™ºèƒ½ä½“ç®¡ç†ä¸æ‰§è¡Œï¼Œæ”¯æŒ Search Agent å’Œè‡ªå®šä¹‰ Toolsã€‚
- **MCP Client**: æ¨¡å‹ä¸Šä¸‹æ–‡åè®®å®¢æˆ·ç«¯ï¼Œç”¨äºè¿æ¥å¤–éƒ¨å·¥å…·ä¸æœåŠ¡ã€‚
- **Task Mode**: å¤æ‚çš„ä»»åŠ¡æ‰§è¡Œå¼•æ“ï¼Œæ”¯æŒä»»åŠ¡æŒä¹…åŒ–ã€ç‰ˆæœ¬æ§åˆ¶ä¸çŠ¶æ€æµè½¬ã€‚
- **RAG Service**: åŸºäº LightRAG çš„çŸ¥è¯†åº“æ„å»ºä¸æ£€ç´¢ï¼Œæ”¯æŒå›¾è°±ç”Ÿæˆã€‚
- **Media Service**: éŸ³é¢‘å¤„ç†ä¸ ASR æœåŠ¡ã€‚
- **Analytics (Vanna)**: è‡ªç„¶è¯­è¨€è½¬ SQL ä¸æ•°æ®åˆ†æå¯è§†åŒ–ã€‚

### æ•°æ®åº“ä¸å­˜å‚¨
åç«¯é»˜è®¤ä½¿ç”¨ SQLite (`recorder_v5.db`)ï¼Œæ”¯æŒå¹³æ»‘åˆ‡æ¢è‡³ PostgreSQL æˆ– MySQLã€‚
- **ä¸»è¦å®ä½“**: Agent, Chat, Workflow, Knowledge, Task (Task Mode), Indicator, UserScript, Skill.
- **Task Mode æŒä¹…åŒ–**: ä¸“é—¨çš„ä»»åŠ¡è¡¨ç»“æ„ï¼Œè®°å½•ä»»åŠ¡ç‰ˆæœ¬ã€QA å†å²ä¸å®¡è®¡æ—¥å¿—ã€‚

### ç¯å¢ƒé…ç½®ä¸å¯åŠ¨

1.  **ç¯å¢ƒé…ç½®**:
    åœ¨ `backend/` ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼š
    ```ini
    PROJECT_NAME="Taichi Agent"
    
    # Database
    USE_SQLITE=True
    # POSTGRES_SERVER=localhost
    
    # LLM API Keys
    OPENAI_API_KEY=sk-xxxx
    DEEPSEEK_API_KEY=sk-xxxx
    
    # Storage
    STORAGE_TYPE=local
    ```

2.  **å®‰è£…ä¾èµ–**:
    ```bash
    cd backend
    python -m venv venv
    # Windows: .\venv\Scripts\activate
    # Linux/Mac: source venv/bin/activate
    pip install -r requirements.txt
    ```

3.  **å¯åŠ¨æœåŠ¡**:
    ```bash
    # è‡ªåŠ¨åˆå§‹åŒ–æ•°æ®åº“å¹¶å¯åŠ¨
    python -m app.main
    # æˆ–
    uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
    ```

### Task Mode (ä»»åŠ¡æ¨¡å¼)
Task Mode æ˜¯æœ¬é¡¹ç›®çš„ä¸€ä¸ªé‡è¦ç‰¹æ€§ï¼Œä¸“ä¸ºé•¿æµç¨‹ã€å¤æ‚ä»»åŠ¡è®¾è®¡ã€‚
- **API æ–‡æ¡£**: `backend/docs/task_mode_api.md`
- **åŠŸèƒ½**:
  - **ä»»åŠ¡å…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†**: åˆ›å»ºã€åˆ†é…ã€æ›´æ–°ã€å®Œæˆã€‚
  - **ç‰ˆæœ¬æ§åˆ¶**: æ¯æ¬¡æ›´æ–°è‡ªåŠ¨ç”Ÿæˆæ–°ç‰ˆæœ¬ï¼Œæ”¯æŒå›æº¯ã€‚
  - **å®¡è®¡æ—¥å¿—**: è®°å½•æ‰€æœ‰æ“ä½œæµæ°´ã€‚
  - **QA è®°å½•**: ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­çš„é—®ç­”å¯¹æŒä¹…åŒ–ã€‚
  - **å¤‡ä»½ä¸æ¢å¤**: æ”¯æŒä»»åŠ¡æ•°æ®çš„å¯¼å‡ºä¸å¯¼å…¥ã€‚

### API æ¥å£
- **Swagger UI**: `http://localhost:8000/docs`
- **OpenAPI JSON**: `/api/v1/openapi.json`
- **ä¸»è¦æ¨¡å—**:
  - `/api/v1/agent`: æ™ºèƒ½ä½“ä¸å·¥å…·
  - `/api/v1/search`: æœç´¢æœåŠ¡
  - `/api/v1/task-mode`: ä»»åŠ¡æ¨¡å¼ç®¡ç†
  - `/api/v1/knowledge`: çŸ¥è¯†åº“ä¸ RAG
  - `/api/v1/mcp`: MCP å·¥å…·é›†æˆ

---

*Taichi Agent Team &copy; 2026*
